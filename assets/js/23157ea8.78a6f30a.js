"use strict";(self.webpackChunkbytevault=self.webpackChunkbytevault||[]).push([[895],{183:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>g,frontMatter:()=>o,metadata:()=>s,toc:()=>m});var s=a(2198),n=a(4848),r=a(8453),l=a(4252),i=a(1725);const o={slug:"database-isolation-visualised-dual-anomalies",title:"DB-010: Dual Anomalies",date:new Date("2025-06-12T00:00:00.000Z"),authors:["abeeshake"],tags:["databases","transactions","mvcc"],draft:!1},d=void 0,c={authorsImageUrls:[void 0]},m=[];function u(e){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.A,{toc:m}),"\n","\n",(0,n.jsx)(i.A,{})]})}function g(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(u,{...e})}):u()}},4252:(e,t,a)=>{a.d(t,{A:()=>l});a(6540);var s=a(5195);const n={tableOfContentsInline:"tableOfContentsInline_prmo"};var r=a(4848);function l(e){let{toc:t,minHeadingLevel:a,maxHeadingLevel:l}=e;return(0,r.jsx)("div",{className:n.tableOfContentsInline,children:(0,r.jsx)(s.A,{toc:t,minHeadingLevel:a,maxHeadingLevel:l,className:"table-of-contents",linkClassName:null})})}},5195:(e,t,a)=>{a.d(t,{A:()=>h});var s=a(6540),n=a(6342);function r(e){const t=e.map((e=>({...e,parentIndex:-1,children:[]}))),a=Array(7).fill(-1);t.forEach(((e,t)=>{const s=a.slice(2,e.level);e.parentIndex=Math.max(...s),a[e.level]=t}));const s=[];return t.forEach((e=>{const{parentIndex:a,...n}=e;a>=0?t[a].children.push(n):s.push(n)})),s}function l(e){let{toc:t,minHeadingLevel:a,maxHeadingLevel:s}=e;return t.flatMap((e=>{const t=l({toc:e.children,minHeadingLevel:a,maxHeadingLevel:s});return function(e){return e.level>=a&&e.level<=s}(e)?[{...e,children:t}]:t}))}function i(e){const t=e.getBoundingClientRect();return t.top===t.bottom?i(e.parentNode):t}function o(e,t){let{anchorTopOffset:a}=t;const s=e.find((e=>i(e).top>=a));if(s){return function(e){return e.top>0&&e.bottom<window.innerHeight/2}(i(s))?s:e[e.indexOf(s)-1]??null}return e[e.length-1]??null}function d(){const e=(0,s.useRef)(0),{navbar:{hideOnScroll:t}}=(0,n.p)();return(0,s.useEffect)((()=>{e.current=t?0:document.querySelector(".navbar").clientHeight}),[t]),e}function c(e){const t=(0,s.useRef)(void 0),a=d();(0,s.useEffect)((()=>{if(!e)return()=>{};const{linkClassName:s,linkActiveClassName:n,minHeadingLevel:r,maxHeadingLevel:l}=e;function i(){const e=function(e){return Array.from(document.getElementsByClassName(e))}(s),i=function(e){let{minHeadingLevel:t,maxHeadingLevel:a}=e;const s=[];for(let n=t;n<=a;n+=1)s.push(`h${n}.anchor`);return Array.from(document.querySelectorAll(s.join()))}({minHeadingLevel:r,maxHeadingLevel:l}),d=o(i,{anchorTopOffset:a.current}),c=e.find((e=>d&&d.id===function(e){return decodeURIComponent(e.href.substring(e.href.indexOf("#")+1))}(e)));e.forEach((e=>{!function(e,a){a?(t.current&&t.current!==e&&t.current.classList.remove(n),e.classList.add(n),t.current=e):e.classList.remove(n)}(e,e===c)}))}return document.addEventListener("scroll",i),document.addEventListener("resize",i),i(),()=>{document.removeEventListener("scroll",i),document.removeEventListener("resize",i)}}),[e,a])}var m=a(8774),u=a(4848);function g(e){let{toc:t,className:a,linkClassName:s,isChild:n}=e;return t.length?(0,u.jsx)("ul",{className:n?void 0:a,children:t.map((e=>(0,u.jsxs)("li",{children:[(0,u.jsx)(m.A,{to:`#${e.id}`,className:s??void 0,dangerouslySetInnerHTML:{__html:e.value}}),(0,u.jsx)(g,{isChild:!0,toc:e.children,className:a,linkClassName:s})]},e.id)))}):null}const x=s.memo(g);function h(e){let{toc:t,className:a="table-of-contents table-of-contents__left-border",linkClassName:i="table-of-contents__link",linkActiveClassName:o,minHeadingLevel:d,maxHeadingLevel:m,...g}=e;const h=(0,n.p)(),b=d??h.tableOfContents.minHeadingLevel,p=m??h.tableOfContents.maxHeadingLevel,v=function(e){let{toc:t,minHeadingLevel:a,maxHeadingLevel:n}=e;return(0,s.useMemo)((()=>l({toc:r(t),minHeadingLevel:a,maxHeadingLevel:n})),[t,a,n])}({toc:t,minHeadingLevel:b,maxHeadingLevel:p});return c((0,s.useMemo)((()=>{if(i&&o)return{linkClassName:i,linkActiveClassName:o,minHeadingLevel:b,maxHeadingLevel:p}}),[i,o,b,p])),(0,u.jsx)(x,{toc:v,className:a,linkClassName:i,...g})}},1725:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(6540),n=a(4848);const r={name:"Combined Anomaly: Dirty Read Leads to Lost Update",description:"A more complex scenario with 3 transactions on a non-MVCC system. It shows how T2 performing a 'Dirty Read' on T1's uncommitted data directly enables the 'Lost Update' anomaly when T1 later aborts.",initialData:{Balance:{value:1e3}},transactions:{T1:{color:"#3b82f6",operations:[{type:"begin",time:10},{type:"write",time:30,target:"Balance",value:900,comment:"Withdrawal of 100"},{type:"abort",time:100,comment:"Transaction is cancelled."}]},T2:{color:"#e11d48",operations:[{type:"begin",time:20},{type:"read",time:50,target:"Balance",comment:"Reads T1's uncommitted value"},{type:"write",time:60,target:"Balance",value:990,comment:"Applies 10% interest to dirty value"},{type:"commit",time:80}]},T3:{color:"#f59e0b",operations:[{type:"begin",time:40},{type:"read",time:70,target:"Balance",comment:"Reads T2's uncommitted value"},{type:"commit",time:90}]}},keyMoments:[{step:2,text:"T1 writes Balance=900. In this non-MVCC system, the write happens 'in-place', immediately changing the value. The data is now 'dirty' (uncommitted). T1 records the old value (1000) in its undo log for a potential rollback.",autoPause:!0,highlight:{currentOpPanel:!0,dataItem:"Balance"}},{step:5,text:"ANOMALY 1: DIRTY READ\nT2 reads the 'Balance'. It sees the uncommitted value of 900 written by T1. T2 is now making business decisions based on data that may not be permanent.",autoPause:!0,isCritical:!0,highlight:{currentOpPanel:!0,transactionState:"T2"}},{step:6,text:"T2 calculates a 10% interest on the dirty value (900 * 1.1 = 990) and writes Balance=990. It has now overwritten T1's uncommitted data with its own uncommitted data.",autoPause:!0,highlight:{currentOpPanel:!0,dataItem:"Balance"}},{step:7,text:"T3 also performs a dirty read, seeing the value 990 from T2. The data's state is becoming increasingly inconsistent.",autoPause:!0,highlight:{currentOpPanel:!0,transactionState:"T3"}},{step:8,text:"T2 commits. The system now considers Balance=990 to be the correct, permanent value. T2's work seems to be safely stored.",autoPause:!0,highlight:{currentOpPanel:!0,dataItem:"Balance"}},{step:10,text:"ANOMALY 2: LOST UPDATE\nT1 aborts! To restore consistency, it consults its undo log. It sees it must change 'Balance' back to its original value of 1000.\nThis single action completely ERASES T2's committed update. The 10% interest calculation is gone. T2's update has been lost!",autoPause:!0,isCritical:!0,highlight:{currentOpPanel:!0,dataItem:"Balance",transactionState:"T1"}}]},l=()=>{const[e,t]=(0,s.useState)(!1),[a,l]=(0,s.useState)(!1),[i,o]=(0,s.useState)(0),[d,c]=(0,s.useState)(0),[m,u]=(0,s.useState)({}),[g,x]=(0,s.useState)({}),[h,b]=(0,s.useState)([]),[p,v]=(0,s.useState)({}),f=(0,s.useRef)(1),y=(0,s.useRef)(null),N=(0,s.useRef)(null),{name:j,description:w,transactions:k,keyMoments:T,initialData:C}=r,L=(0,s.useCallback)((()=>Object.entries(k).flatMap((e=>{let[t,a]=e;return a.operations.map((e=>({...e,transaction:t,color:a.color})))})).sort(((e,t)=>e.time-t.time))),[k]),I=(0,s.useRef)(L()).current,A=(0,s.useMemo)((()=>Math.max(...I.map((e=>e.time)))+10),[I]),H=(0,s.useCallback)((()=>{const e={};for(const t in C)e[t]={value:C[t].value,lastWriterTxId:0,lastWriterTxName:"Initial",isCommitted:!0};u(e),x({}),b([]),v({}),f.current=1}),[C]);(0,s.useEffect)((()=>{H()}),[H]);const S=(0,s.useCallback)((e=>{const t={};for(const r in C)t[r]={value:C[r].value,lastWriterTxId:0,lastWriterTxName:"Initial",isCommitted:!0};let a={},s=1,n=[];return I.slice(0,e).forEach((e=>{const r=e,l=r.transaction;if("begin"===r.type){const e=s++;a[l]={id:e,name:l,startTime:r.time,status:"active",reads:[],undoLog:[]}}else if("active"===a[l]?.status){const e=a[l],s=r,n=r;if("read"===r.type){const a=t[n.target].value;e.reads.push({item:n.target,valueRead:a,time:r.time})}else if("write"===r.type){const a=t[s.target];e.undoLog.some((e=>e.item===s.target))||e.undoLog.push({item:s.target,oldValue:a.value}),a.value=s.value,a.lastWriterTxId=e.id,a.lastWriterTxName=e.name,a.isCommitted=!1}else if("commit"===r.type)e.status="committed",Object.values(t).forEach((t=>{t.lastWriterTxId===e.id&&(t.isCommitted=!0)}));else if("abort"===r.type){e.status="aborted";for(const a of e.undoLog)t[a.item].value=a.oldValue}}n.push({...r,txId:a[l]?.id})})),{dbState:t,txDetails:a,completedOps:n,nextTxId:s}}),[I,C]),O=(0,s.useCallback)((t=>{if(0===t)H(),o(0);else{const s=I[t-1];o(s.time);const n=S(t);u(n.dbState),x(n.txDetails),b(n.completedOps),f.current=n.nextTxId;const r=T.find((e=>e.step===t));r?(v({...r,step:t}),r.autoPause&&e&&!a&&l(!0)):p.step!==t&&v({})}}),[I,S,H,e,a,p.step,T]);(0,s.useEffect)((()=>{if(e&&!a){const e=setInterval((()=>{c((e=>{if(e>=I.length)return t(!1),l(!1),e;const a=e+1;return O(a),a}))}),1500);return()=>clearInterval(e)}}),[e,a,I.length,O]);const M=()=>{l(!1),p.autoPause&&p.step===d&&v((e=>({...e,autoPause:!1})))},R=e=>e/A*95,D=d>0?I[d-1]:null,E=D&&p.highlight?.currentOpPanel&&p.step===d,[P,B]=(0,s.useState)("12rem");return(0,s.useEffect)((()=>{if(N.current){const e=Object.keys(k).length;B(2.25*e+1+"rem")}}),[k]),(0,n.jsxs)("div",{className:"w-full min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-4 sm:p-6 font-sans",children:[(0,n.jsxs)("header",{className:"mb-6",children:[(0,n.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-1",children:j}),(0,n.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:w})]}),(0,n.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 mb-6",children:(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 mb-3",children:[(0,n.jsxs)("div",{className:"flex gap-2 flex-wrap justify-center",children:[(0,n.jsx)("button",{onClick:()=>{O(0),t(!0),l(!1),c(1),O(1)},disabled:e&&!a,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400 text-sm",children:"Auto Run"}),e&&(a?(0,n.jsx)("button",{onClick:M,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:"Resume"}):(0,n.jsx)("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600 text-sm",children:"Pause"})),(0,n.jsx)("button",{onClick:()=>{t(!1),l(!1),c(0),O(0)},className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 text-sm",children:"Reset"}),(0,n.jsxs)("div",{className:"sm:border-l border-gray-300 dark:border-gray-700 sm:pl-2 flex gap-2",children:[(0,n.jsx)("button",{onClick:()=>{if(d>0){const e=d-1;c(e),O(e)}},disabled:0===d||e&&!a,className:"px-3 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:bg-gray-400 text-sm",children:"\u2190 Step"}),(0,n.jsx)("button",{onClick:()=>{if(d<I.length){const e=d+1;c(e),O(e)}},disabled:d>=I.length||e&&!a,className:"px-3 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:bg-gray-400 text-sm",children:"Step \u2192"})]})]}),(0,n.jsxs)("div",{className:"text-right text-xs sm:text-sm",children:[(0,n.jsxs)("div",{className:"font-mono text-gray-700 dark:text-gray-300",children:["Step: ",d,"/",I.length," | Time: ",i]}),(0,n.jsxs)("div",{className:"text-gray-500 dark:text-gray-400",children:["Next TxID: ",f.current]})]})]})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4 mb-6 text-xs sm:text-sm",children:[(0,n.jsxs)("div",{className:"lg:col-span-3 bg-white dark:bg-gray-800 p-4 rounded-lg shadow-xl",children:[(0,n.jsx)("h3",{className:"font-semibold mb-3 text-base sm:text-lg border-b border-gray-200 dark:border-gray-700 pb-2",children:"Database State (No Versions)"}),Object.entries(m).map((e=>{let[t,a]=e;const s=p.highlight?.dataItem===t,r=a.lastWriterTxId?g[a.lastWriterTxName]:null;return(0,n.jsxs)("div",{className:"p-3 rounded transition-all "+(s?"ring-2 ring-yellow-500 bg-gray-100 dark:bg-gray-700":"bg-gray-50 dark:bg-gray-800"),children:[(0,n.jsx)("h4",{className:"font-bold text-lg text-fuchsia-500 dark:text-fuchsia-400",children:t}),(0,n.jsx)("div",{className:"text-3xl font-mono font-bold text-green-600 dark:text-green-400 my-2",children:a.value}),(0,n.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:["Last write by: ",(0,n.jsx)("span",{style:{color:r?k[r.name].color:"inherit"},children:a.lastWriterTxName||"N/A"}),(0,n.jsx)("span",{className:"ml-2 font-semibold "+(a.isCommitted?"text-green-500":"text-yellow-500"),children:a.isCommitted?"COMMITTED":"UNCOMMITTED (Dirty)"})]})]},t)}))]}),(0,n.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,n.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg shadow-xl "+(E?"ring-2 ring-purple-500":""),children:[(0,n.jsx)("h3",{className:"font-semibold mb-2 border-b border-gray-200 dark:border-gray-700 pb-1 text-sm sm:text-base",children:"Current Operation"}),D?(0,n.jsxs)("div",{className:"font-mono text-xs",children:[(0,n.jsxs)("span",{style:{color:D.color},children:[D.transaction," (TxID: ",g[D.transaction]?.id,")"]}),": ",D.type.toUpperCase(),D.target&&` ${D.target}`,void 0!==D.value&&` = ${D.value}`,D.comment&&(0,n.jsxs)("span",{className:"text-[10px] text-gray-500 block italic",children:["(",D.comment,")"]})]}):(0,n.jsx)("div",{className:"text-gray-500 italic",children:"None"})]}),(0,n.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg shadow-xl max-h-96 overflow-y-auto",children:[(0,n.jsx)("h3",{className:"font-semibold mb-2 border-b border-gray-200 dark:border-gray-700 pb-1 text-sm sm:text-base",children:"Transaction States & Undo Logs"}),Object.values(g).length>0?Object.values(g).map((e=>(0,n.jsxs)("div",{className:"mb-2 p-2 rounded text-[11px] sm:text-xs "+(p.highlight?.transactionState===e.name?"bg-gray-100 dark:bg-gray-700 ring-1 ring-sky-500":"bg-gray-50 dark:bg-gray-800"),children:[(0,n.jsxs)("p",{className:"font-bold",style:{color:k[e.name]?.color},children:[" ",e.name," (ID: ",e.id,") St: ",(0,n.jsx)("span",{className:"committed"===e.status?"text-green-500":"aborted"===e.status?"text-red-500":"text-yellow-500",children:e.status})]}),e.reads.map(((e,t)=>(0,n.jsxs)("p",{className:"pl-1 font-mono text-gray-600 dark:text-gray-300",children:["\u21b3 Read ",e.item," (t=",e.time,"): Got value ",e.valueRead]},t))),e.undoLog.length>0&&(0,n.jsxs)("p",{className:"pl-1 font-mono text-blue-600 dark:text-blue-400",children:["Undo Log: ",e.undoLog.map((e=>`[${e.item}: ${e.oldValue}]`)).join(", ")]})]},e.id))):(0,n.jsx)("div",{className:"text-gray-500 italic text-xs",children:"No active transactions."})]})]})]}),p.text&&(0,n.jsxs)("div",{className:"my-4 p-3 sm:p-4 rounded-lg border-2 "+(p.isCritical?"border-red-400 bg-red-50 dark:bg-red-900/30 shadow-lg":"border-blue-400 bg-blue-50 dark:bg-blue-900/30"),children:[(0,n.jsxs)("h3",{className:"text-sm sm:text-base font-semibold mb-1 "+(p.isCritical?"text-red-700 dark:text-red-300":"text-blue-700 dark:text-blue-300"),children:["\ud83d\udd0d Insight at Step ",p.step," (Time: ",D?.time,")"]}),(0,n.jsx)("p",{className:"text-xs sm:text-sm whitespace-pre-line "+(p.isCritical?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"),children:p.text}),a&&p.autoPause&&p.step===d&&(0,n.jsx)("button",{onClick:M,className:"mt-2 px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600 text-xs sm:text-sm",children:"Continue"})]}),(0,n.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 sm:p-6",ref:y,children:[(0,n.jsx)("h2",{className:"text-base sm:text-xl font-semibold mb-2 text-gray-800 dark:text-gray-200",children:"Transaction Timelines"}),(0,n.jsxs)("div",{className:"relative mb-4 pt-4",children:[(0,n.jsx)("div",{className:"absolute top-4 left-0 right-0 h-px bg-gray-300 dark:bg-gray-600"}),(0,n.jsx)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-2 px-[2.5%] w-[95%]",children:Array.from({length:Math.floor(A/10)+1},((e,t)=>10*t<=A-5&&(0,n.jsxs)("div",{className:"relative flex flex-col items-center",children:[(0,n.jsx)("div",{className:"absolute w-px h-2 bg-gray-300 dark:bg-gray-600 -top-2"}),(0,n.jsx)("div",{children:10*t})]},t)))}),(e||d>0)&&(0,n.jsx)("div",{className:"absolute top-4 w-0.5 bg-red-500 transition-all duration-200 ease-linear z-20",style:{left:`${R(i)}%`,height:P},children:(0,n.jsx)("div",{className:"absolute -top-3.5 -left-[7px] w-3.5 h-3.5 bg-red-500 rounded-full border-2 border-white dark:border-gray-900 shadow-md"})})]}),(0,n.jsx)("div",{className:"space-y-3 relative",ref:N,children:Object.entries(k).map((e=>{let[t,a]=e;return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("div",{className:"flex items-center mb-0.5",children:[(0,n.jsx)("div",{className:"w-2.5 h-2.5 rounded-full mr-1.5 shrink-0",style:{backgroundColor:a.color}}),(0,n.jsx)("h3",{className:"text-xs sm:text-sm font-semibold text-gray-800 dark:text-gray-200",children:t})]}),(0,n.jsxs)("div",{className:"relative h-6 bg-gray-100 dark:bg-gray-700 rounded",children:[(0,n.jsx)("div",{className:"absolute top-0 left-0 h-full rounded opacity-30",style:{backgroundColor:a.color,width:`${R(a.operations.at(-1).time)}%`}}),a.operations.map(((e,s)=>{const r=h.some((a=>a.transaction===t&&a.time===e.time&&a.type===e.type));return(0,n.jsx)("div",{className:"absolute top-0.5 w-5 h-5 rounded-full border flex items-center justify-center text-[9px] font-bold transition-all "+(r?"bg-white dark:bg-gray-200 shadow-md scale-105 border-2":"bg-gray-200 dark:bg-gray-600 opacity-70 border-gray-400"),style:{left:`calc(${R(e.time)}% - 10px)`,borderColor:r?a.color:void 0,color:r?a.color:"text-gray-500"},title:`${e.type.toUpperCase()}`,children:e.type.charAt(0).toUpperCase()},`${t}-${e.time}-${s}`)}))]})]},t)}))})]})]})};var i=a(5294);const o=()=>(0,n.jsx)(i.A,{title:"No-MVCC Combined Anomaly Visualization",children:(0,n.jsx)(l,{})})},5294:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(6540),n=a(961),r=a(4848);const l=e=>{let{children:t,title:a}=e;const[l,i]=(0,s.useState)(!1),[o,d]=(0,s.useState)(null);(0,s.useEffect)((()=>{const e=document.createElement("div");return e.style.position="relative",document.body.appendChild(e),d(e),()=>{document.body.removeChild(e)}}),[]),(0,s.useEffect)((()=>(document.body.style.overflow=l?"hidden":"",()=>{document.body.style.overflow=""})),[l]);const c=()=>{i(!l)},m=(0,r.jsxs)("div",{className:"relative",children:[t,(0,r.jsxs)("button",{onClick:c,className:"absolute right-4 top-4 z-50 flex items-center gap-2 px-3 py-2 rounded-lg  bg-blue-600 hover:bg-blue-700 text-white transition-colors duration-200",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h4a1 1 0 010 2H5.414l2.293 2.293a1 1 0 11-1.414 1.414L4 6.414V8a1 1 0 01-2 0V4zm14 0a1 1 0 00-1-1h-4a1 1 0 100 2h2.586l-2.293 2.293a1 1 0 001.414 1.414L16 6.414V8a1 1 0 102 0V4zM3 16a1 1 0 001 1h4a1 1 0 100-2H5.414l2.293-2.293a1 1 0 00-1.414-1.414L4 13.586V12a1 1 0 10-2 0v4zm14 0a1 1 0 01-1 1h-4a1 1 0 110-2h2.586l-2.293-2.293a1 1 0 011.414-1.414L16 13.586V12a1 1 0 112 0v4z",clipRule:"evenodd"})}),"Full Screen"]})]}),u=o&&(0,n.createPortal)((0,r.jsx)("div",{className:"fixed inset-0 z-[9999] bg-white overflow-auto",children:(0,r.jsxs)("div",{className:"p-8",children:[a&&(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:a}),t,(0,r.jsxs)("button",{onClick:c,className:"fixed right-4 top-4 z-[10000] flex items-center gap-2 px-3 py-2 rounded-lg  bg-gray-200 hover:bg-gray-300 text-gray-800 transition-colors duration-200",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h4a1 1 0 010 2H6.414l2.293 2.293a1 1 0 11-1.414 1.414L5 6.414V8a1 1 0 01-2 0V4zm14 0a1 1 0 00-1-1h-4a1 1 0 100 2h1.586l-2.293 2.293a1 1 0 001.414 1.414L15 6.414V8a1 1 0 102 0V4zM3 16a1 1 0 001 1h4a1 1 0 100-2H6.414l2.293-2.293a1 1 0 00-1.414-1.414L5 13.586V12a1 1 0 10-2 0v4zm14 0a1 1 0 01-1 1h-4a1 1 0 110-2h1.586l-2.293-2.293a1 1 0 011.414-1.414L15 13.586V12a1 1 0 112 0v4z",clipRule:"evenodd"})}),"Exit Full Screen"]})]})}),o);return(0,r.jsxs)(r.Fragment,{children:[m,l&&u]})}},8453:(e,t,a)=>{a.d(t,{R:()=>l,x:()=>i});var s=a(6540);const n={},r=s.createContext(n);function l(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:l(e.components),s.createElement(r.Provider,{value:t},e.children)}},2198:e=>{e.exports=JSON.parse('{"permalink":"/byte_vault/database-isolation-visualised-dual-anomalies","source":"@site/blog/2025-06-12-db-isolation-010-dual-anomalies.mdx","title":"DB-010: Dual Anomalies","description":"","date":"2025-06-12T00:00:00.000Z","tags":[{"inline":false,"label":"Databases","permalink":"/byte_vault/tags/databases","description":"Database systems"},{"inline":false,"label":"Transactions","permalink":"/byte_vault/tags/transactions","description":"Transactions"},{"inline":false,"label":"MVCC","permalink":"/byte_vault/tags/mvcc","description":"Multi-Version Concurrency Control"}],"readingTime":0.08,"hasTruncateMarker":false,"authors":[{"name":"Abhishek Tripathi","title":"Curiosity brings awareness.","url":"https://github.com/TwistingTwists","page":{"permalink":"/byte_vault/authors/abeeshake"},"socials":{"x":"https://x.com/twistin456","github":"https://github.com/TwistingTwists"},"imageURL":"https://github.com/TwistingTwists.png","key":"abeeshake"}],"frontMatter":{"slug":"database-isolation-visualised-dual-anomalies","title":"DB-010: Dual Anomalies","date":"2025-06-12T00:00:00.000Z","authors":["abeeshake"],"tags":["databases","transactions","mvcc"],"draft":false},"unlisted":false,"prevItem":{"title":"The Day I Taught Claude Code to Work Without Me (And How You Can Too)","permalink":"/byte_vault/claude-code-context-engineering-v2"},"nextItem":{"title":"DB-008: Phantom Read","permalink":"/byte_vault/database-isolation-phantom-read"}}')}}]);